<form id="contact" novalidate>
  <div class="field">
    <label for="name">Ім'я</label>
    <input id="name" name="name" type="text" required autocomplete="name" />
  </div>
  <div class="field">
    <label for="email">Email</label>
    <input id="email" name="email" type="email" required autocomplete="email" />
  </div>
  <div class="field">
    <label for="message">Повідомлення</label>
    <textarea id="message" name="message" rows="5" required></textarea>
  </div>
  <div class="hp" aria-hidden="true">
    <label for="website">Ваш сайт</label>
    <input id="website" name="website" type="text" tabindex="-1" autocomplete="off" />
  </div>
  <button type="submit">Надіслати</button>
  <p id="status" role="status" aria-live="polite"></p>
</form>

<script type="module">
  // Простий AJAX із валідацією на клієнті
  const form = document.getElementById('contact');
  const status = document.getElementById('status');
  const required = ['name','email','message'];
  const validate = () => required.every(id => (document.getElementById(id) as HTMLInputElement).value.trim().length > 0);

  form?.addEventListener('submit', async (e) => {
    e.preventDefault();
    status.textContent = '';
    if (!validate()) { status.textContent = 'Заповніть обов\'язкові поля.'; return; }
    const data = new FormData(form as HTMLFormElement);
    const started = Date.now();
    const res = await fetch('/functions/contact', { method: 'POST', body: data });
    const elapsed = Date.now() - started;
    if (res.ok && elapsed > 400) { // примітивний антиспам по таймінгу
      form.reset();
      status.textContent = 'Повідомлення надіслано.';
    } else {
      status.textContent = 'Сталася помилка. Спробуйте ще.';
    }
  });
</script>

<style>
.field { display:grid; gap:.3rem; margin-bottom: .8rem; }
.hp { position: absolute; left: -9999px; }
button { padding:.6rem 1rem; border-radius: .6rem; border:1px solid var(--color-border, rgba(0,0,0,.1)); }
</style>