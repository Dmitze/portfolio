---
const { tags = [] } = Astro.props as { tags?: string[] };
const active = Astro.url.searchParams.get('tag') ?? 'all';
const setParam = (t: string) => {
  const url = new URL(Astro.url);
  if (t === 'all') url.searchParams.delete('tag'); else url.searchParams.set('tag', t);
  return url.pathname + url.search;
};
---
<div class="filters" role="tablist" aria-label="Фільтри проєктів">
  <a role="tab" class={active === 'all' ? 'active' : ''} href={setParam('all')}>Усі</a>
  {tags.map((t) => <a role="tab" class={active === t ? 'active' : ''} href={setParam(t)}>{t}</a>)}
</div>

<style>
.filters { display:flex; flex-wrap:wrap; gap:.5rem; margin:1rem 0; }
.filters a { border:1px solid var(--color-border, rgba(0,0,0,.1)); padding:.4rem .7rem; border-radius:999px; }
.filters a.active { background: color-mix(in oklab, var(--color-accent, #6750a4) 20%, transparent); }
</style>